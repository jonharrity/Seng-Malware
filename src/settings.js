

function loadScanStatus() {
	document.getElementById('status-label').innerHTML = 'No scan scheduled';
}

function toggleRecurrent() {
	document.getElementById('single').classList.toggle('hidden');
	document.getElementById('recurrent').classList.toggle('hidden');
}

function handleSchedule() {
	var type = getScheduleType();
	var newDate;
	if( type == 'recurrent' ) 
		newDate = handleScheduleRecurrent();
	else
		newDate = handleScheduleSingle();
	if( isValidDate(newDate) )
		newStatus = 'Scan scheduled for ' + newDate;
	else
		newStatus = 'Invalid date';

	console.log('setting new status');
	document.getElementById('status-label').innerHTML = newStatus;
}

function isValidDate(dateObj) {
	return ! isNaN(dateObj.getDate());
}

function getScheduleType() {
	if( document.getElementById('recurrent').classList.contains('hidden') )
		return 'single';
	else
		return 'recurrent';
}

function handleScheduleRecurrent() {
	return new Date();
}

function handleScheduleSingle() {
	var year = '20'+document.getElementById('single-year').value;
	var month = document.getElementById('single-month').value;
	var day = document.getElementById('single-day').value;
	var hour = Number(document.getElementById('single-hour').value);
	if( document.getElementById('single-hour-type').value == 'pm' )
		hour += 12;

	var date = new Date(year,month,day,hour);
	return date;
}

	
